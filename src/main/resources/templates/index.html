<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">

<head th:replace="fragments/head::head"></head>

<body class="m-page--fluid m--skin- m-content--skin-light2 m-header--fixed m-header--fixed-mobile m-aside-left--enabled m-aside-left--skin-dark m-aside-left--offcanvas m-footer--push m-aside--offcanvas-default">
<div class="m-grid m-grid--hor m-grid--root m-page">
    <header th:replace="fragments/header :: header"></header>

    <div class="m-grid__item m-grid__item--fluid m-grid m-grid--ver-desktop m-grid--desktop m-body">
        <button class="m-aside-left-close  m-aside-left-close--skin-dark " id="m_aside_left_close_btn">
            <i class="la la-close"></i>
        </button>
        <div th:replace="fragments/left_aside :: left_aside"></div>
        <div class="m-grid__item m-grid__item--fluid m-wrapper">
            <div class="m-content">
                <div class="row">
                    <div th:class="${#authorization.expression('hasAuthority(''Менеджер'')')} ? 'col-xl-4' : 'col-xl-12'">
                        <!--begin:: Widgets/Tasks -->
                        <div class="m-portlet m-portlet--full-height ">
                            <div class="m-portlet__head">
                                <div class="m-portlet__head-caption">
                                    <div class="m-portlet__head-title">
                                        <h3 class="m-portlet__head-text">
                                            Ближайшие сессии разбора
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="m-portlet__body">
                                <div class="tab-content">
                                    <div class="tab-pane active" id="m_widget2_tab1_content">
                                        <div class="m-widget2">
                                            <div th:each="n:${notifications}"
                                                 class="m-widget2__item m-widget2__item--danger">
                                                <div class="m-widget2__checkbox">
                                                </div>
                                                <div class="m-widget2__desc">
															<span class="m-widget2__text" th:inline="text">
																Разбор слотов для лиги [[${n.league.name}]]
                                                                начался. Окончание разбора [[${#dates.format(n.endDate, "dd.MM.YYYY")}]] в [[${#dates.format(n.endTime, "HH:mm")}]]
															</span>
                                                    <br></br>
                                                    <span class="m-widget2__user-name">
																<a th:href="@{'/all-stadiums'}" class="m-widget2__link">
																	Перейти к разбору
																</a>
															</span>
                                                </div>
                                            </div>
                                            <div th:each="s:${futureSessions}"
                                                 class="m-widget2__item m-widget2__item--primary">
                                                <div class="m-widget2__checkbox">
                                                </div>
                                                <div class="m-widget2__desc">
															<span class="m-widget2__text" th:inline="text">
																Разбор слотов для лиги [[${s.league.name}]]
                                                                начнется [[${#dates.format(s.startDate, "dd.MM.YYYY")}]] в [[${#dates.format(s.startTime, "HH:mm")}]]
															</span>
                                                    <br></br>
                                                    <span class="m-widget2__user-name">
																<a th:href="@{'/all-stadiums'}" class="m-widget2__link">
																	Перейти к разбору
																</a>
															</span>
                                                </div>
                                            </div>
                                            <div th:if="${futureSessions.isEmpty() and notifications.isEmpty()}">
                                                <div class="m-widget2__desc">
															<span class="m-widget2__text"
                                                                  style="width: 100% !important; text-align: center !important; display: block">
															Активных сессий не найдено
															</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--end:: Widgets/Tasks -->
                    </div>
                    <div class="col-xl-4" sec:authorize="hasAuthority('Менеджер')">
                        <!--begin:: Widgets/Support Tickets -->
                        <div class="m-portlet m-portlet--full-height ">
                            <div class="m-portlet__head">
                                <div class="m-portlet__head-caption">
                                    <div class="m-portlet__head-title">
                                        <h3 class="m-portlet__head-text">
                                            Мои команды
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="m-portlet__body">
                                <!--begin: Datatable -->
                                <table class="m-datatable" id="html_table" width="100%">
                                    <thead>
                                    <tr>
                                        <th title="Field #1">
                                            Название
                                        </th>
                                        <th title="Field #2">
                                            Лига
                                        </th>
                                    </tr>
                                    </thead>
                                    <tbody>
                                    <tr th:each="team:${teamList}">
                                        <td th:text="${team.name}"></td>
                                        <td th:text="${team.league.name}"></td>
                                    </tr>
                                    </tbody>
                                </table>
                                <!--end: Datatable -->
                            </div>

                        </div>
                        <!--end:: Widgets/Support Tickets -->
                    </div>

                    <div class="col-xl-4" sec:authorize="hasAuthority('Менеджер')">
                        <!--begin:: Widgets/Tasks -->
                        <div class="m-portlet m-portlet--full-height ">
                            <div class="m-portlet__head">
                                <div class="m-portlet__head-caption">
                                    <div class="m-portlet__head-title">
                                        <h3 class="m-portlet__head-text">
                                            Актуальные сообщения
                                        </h3>
                                    </div>
                                </div>
                            </div>
                            <div class="m-portlet__body">
                                <div class="tab-content">
                                    <div class="tab-pane active" id="m_widget3_tab1_content">
                                        <div class="m-widget2">
                                            <div th:each="message:${messages}"
                                                 class="m-widget2__item m-widget2__item--danger">
                                                <div class="m-widget2__checkbox">
                                                </div>
                                                <div class="m-widget2__desc">
															<span class="m-widget2__text" th:inline="text">
                                                                <p>Новое сообщение для матча <b>[[${message.match.getHomeAndGuest()}]]</b>:</p>
                                                                <p>[[${message.message}]]</p>
															</span>
                                                </div>
                                            </div>

                                            <div th:if="${messages.isEmpty()}">
                                                <div class="m-widget2__desc">
															<span class="m-widget2__text"
                                                                  style="width: 100% !important; text-align: center !important; display: block">
															Актуальных сообщений не найдено
															</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!--end:: Widgets/Tasks -->
                    </div>



                </div>
            </div>
        </div>
    </div>
    <footer th:replace="fragments/footer :: footer"></footer>
</div>

<!--<footer th:replace="layout :: site-footer" />-->
<script src="/../../public/js/vendors.bundle.js" th:src="@{/js/vendors.bundle.js}" type="text/javascript"></script>
<script src="/../../public/js/scripts.bundle.js" th:src="@{/js/scripts.bundle.js}" type="text/javascript"></script>
<script sec:authorize="hasAuthority('Менеджер')" src="/../../public/js/datatables/html-table.js"
        th:src="@{/js/datatables/html-table.js}" type="text/javascript"></script>
</body>
</html>